USE SmartParkingLotSystem;
GO

-- Xóa dữ liệu cũ (nếu cần)
-- DELETE FROM card_logs;
-- DELETE FROM monthly_cards;
-- DELETE FROM vehicles;
-- DELETE FROM customers;
-- DELETE FROM cards;
-- DELETE FROM cameras;
-- DELETE FROM staffs;

-- =====================================================
-- 1. TẠO DỮ LIỆU CƠ BẢN
-- =====================================================
SET IDENTITY_INSERT staffs ON;
INSERT INTO staffs (id, username, password, fullname, phone_number, role) VALUES
(1, 'admin', 'a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3', 'Nguyen Van A', '0901000001', 1),
(2, 'employee', 'a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3', 'Nguyen Van B', '0901000002', 2),
(3, 'tuan', 'a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3', 'Nguyen Vo Quoc Tuan', '0901000002', 1),
(4, 'chi', 'a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3', 'Do Thi Kim Chi', '0901000003', 1),
(5, 'hoang', 'a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3', 'Phan Ba Huy Hoang', '0901000003', 2),
(6, 'tri', 'a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3', 'Nguyen Minh Tri', '0901000003', 2);
SET IDENTITY_INSERT staffs OFF;


-- Thêm cameras
INSERT INTO cameras (source_type, rtsp_url, description) VALUES
('rtsp', 'rtsp://192.168.1.100/cam1', N'Camera cổng vào chính'),
('rtsp', 'rtsp://192.168.1.101/cam2', N'Camera cổng ra chính'),
('rtsp', 'rtsp://192.168.1.102/cam3', N'Camera khu A'),
('rtsp', 'rtsp://192.168.1.103/cam4', N'Camera khu B');

-- Thêm staffs
INSERT INTO staffs (fullname, phone_number, username, password, role) VALUES
(N'Nguyễn Văn An', '0901234567', 'admin', 'admin123', 1),
(N'Trần Thị Bình', '0902345678', 'staff1', 'staff123', 2),
(N'Lê Văn Cường', '0903456789', 'staff2', 'staff123', 2);

-- Thêm customers cho thẻ tháng
INSERT INTO customers (full_name, phone_number, email) VALUES
(N'Phạm Minh Đức', '0911111111', 'pmduc@email.com'),
(N'Hoàng Thị Hoa', '0922222222', 'hthoa@email.com'),
(N'Vũ Văn Khoa', '0933333333', 'vvkhoa@email.com'),
(N'Đặng Thị Lan', '0944444444', 'dtlan@email.com'),
(N'Bùi Văn Nam', '0955555555', 'bvnam@email.com'),
(N'Trương Thị Oanh', '0966666666', 'ttoanh@email.com'),
(N'Lý Văn Phong', '0977777777', 'lvphong@email.com'),
(N'Mai Thị Quỳnh', '0988888888', 'mtquynh@email.com'),
(N'Đỗ Văn Sơn', '0999999999', 'dvson@email.com'),
(N'Phan Thị Tuyết', '0910101010', 'pttuyet@email.com');

-- Thêm vehicles (50 xe)
DECLARE @i INT = 1;
WHILE @i <= 50
BEGIN
    INSERT INTO vehicles (vehicle_type, plate_number) VALUES
    (N'Xe máy', CONCAT('29A-', RIGHT('00000' + CAST(@i AS VARCHAR), 5)));
    SET @i = @i + 1;
END

-- Thêm cards (thẻ lượt)
INSERT INTO cards (card_code, price, night_price, created_by, is_active) VALUES
('C0001', 3000, 5000, 1, 1),
('C0002', 3000, 5000, 1, 1),
('C0003', 3000, 5000, 1, 1),
('C0004', 3000, 5000, 1, 1),
('C0005', 3000, 5000, 1, 1),
('C0006', 3000, 5000, 1, 1),
('C0007', 3000, 5000, 1, 1),
('C0008', 3000, 5000, 1, 1),
('C0009', 3000, 5000, 1, 1),
('C0010', 3000, 5000, 1, 1),
('C0011', 3000, 5000, 1, 1),
('C0012', 3000, 5000, 1, 1),
('C0013', 3000, 5000, 1, 1),
('C0014', 3000, 5000, 1, 1),
('C0015', 3000, 5000, 1, 1),
('C0016', 3000, 5000, 1, 1),
('C0017', 3000, 5000, 1, 1),
('C0018', 3000, 5000, 1, 1),
('C0019', 3000, 5000, 1, 1),
('C0020', 3000, 5000, 1, 1),
('C0021', 3000, 5000, 1, 1),
('C0022', 3000, 5000, 1, 1),
('C0023', 3000, 5000, 1, 1),
('C0024', 3000, 5000, 1, 1),
('C0025', 3000, 5000, 1, 1),
('C0026', 3000, 5000, 1, 1),
('C0027', 3000, 5000, 1, 1),
('C0028', 3000, 5000, 1, 1),
('C0029', 3000, 5000, 1, 1),
('C0030', 3000, 5000, 1, 1),
('C0031', 3000, 5000, 1, 1),
('C0032', 3000, 5000, 1, 1),
('C0033', 3000, 5000, 1, 1),
('C0034', 3000, 5000, 1, 1),
('C0035', 3000, 5000, 1, 1),
('C0036', 3000, 5000, 1, 1),
('C0037', 3000, 5000, 1, 1),
('C0038', 3000, 5000, 1, 1),
('C0039', 3000, 5000, 1, 1),
('C0040', 3000, 5000, 1, 1),
('C0041', 3000, 5000, 1, 1),
('C0042', 3000, 5000, 1, 1),
('C0043', 3000, 5000, 1, 1),
('C0044', 3000, 5000, 1, 1),
('C0045', 3000, 5000, 1, 1),
('C0046', 3000, 5000, 1, 1),
('C0047', 3000, 5000, 1, 1),
('C0048', 3000, 5000, 1, 1),
('C0049', 3000, 5000, 1, 1),
('C0050', 3000, 5000, 1, 1);


-- =====================================================
-- 2. TẠO DỮ LIỆU THẺ THÁNG (10 thẻ) - 600k/tháng
-- =====================================================

-- Thẻ tháng năm 2023 Q2
INSERT INTO monthly_cards (card_code, customer_id, vehicle_id, monthly_fee, start_date, expiry_date, is_paid, is_active)
VALUES
('MONTH001', 1, 1, 120000, '2023-04-01', '2023-06-30', 1, 1),
('MONTH002', 2, 2, 120000, '2023-05-01', '2023-07-31', 1, 1);

-- Thẻ tháng năm 2024 Q2
INSERT INTO monthly_cards (card_code, customer_id, vehicle_id, monthly_fee, start_date, expiry_date, is_paid, is_active)
VALUES
('MONTH003', 3, 3, 120000, '2024-04-01', '2024-06-30', 1, 1),
('MONTH004', 4, 4, 120000, '2024-05-01', '2024-07-31', 1, 1),
('MONTH005', 5, 5, 120000, '2024-06-01', '2024-08-31', 1, 1);

-- Thẻ tháng năm 2025 Q2
INSERT INTO monthly_cards (card_code, customer_id, vehicle_id, monthly_fee, start_date, expiry_date, is_paid, is_active)
VALUES
('MONTH006', 6, 6, 120000, '2025-04-01', '2025-06-30', 1, 1),
('MONTH007', 7, 7, 120000, '2025-05-01', '2025-07-31', 1, 1),
('MONTH008', 8, 8, 120000, '2025-06-01', '2025-08-31', 1, 1),
('MONTH009', 9, 9, 180000, '2025-04-15', '2025-07-15', 1, 1),
('MONTH010', 10, 10, 180000, '2025-05-15', '2025-08-15', 1, 1);


-- Năm 2023 Q2 (15 records)
-- Tháng 4/2023
INSERT INTO card_logs (card_id, vehicle_id, entry_at, exit_at, fee, created_by, closed_by)
VALUES
(1, 11, '2023-04-05 08:30:00', '2023-04-05 10:15:00', 3000, 2, 2),  -- giờ hành chính
(2, 12, '2023-04-10 09:00:00', '2023-04-10 11:30:00', 3000, 2, 2),  -- giờ hành chính
(3, 13, '2023-04-15 14:20:00', '2023-04-15 16:45:00', 3000, 2, 2),  -- giờ hành chính
(4, 14, '2023-04-18 07:15:00', '2023-04-18 09:00:00', 3000, 2, 2),  -- giờ hành chính
(5, 15, '2023-04-25 23:30:00', '2023-04-26 02:00:00', 5000, 2, 2);  -- ngoài giờ

-- Tháng 5/2023
INSERT INTO card_logs (card_id, vehicle_id, entry_at, exit_at, fee, created_by, closed_by)
VALUES
(1, 16, '2023-05-03 08:45:00', '2023-05-03 10:30:00', 3000, 2, 2),  -- giờ hành chính
(2, 17, '2023-05-08 13:20:00', '2023-05-08 15:50:00', 3000, 2, 2),  -- giờ hành chính
(3, 18, '2023-05-12 22:10:00', '2023-05-13 01:00:00', 5000, 2, 2),  -- ngoài giờ
(4, 19, '2023-05-20 15:00:00', '2023-05-20 17:15:00', 3000, 2, 2),  -- giờ hành chính
(5, 20, '2023-05-28 18:30:00', '2023-05-28 20:45:00', 3000, 2, 2);  -- giờ hành chính

-- Tháng 6/2023
INSERT INTO card_logs (card_id, vehicle_id, entry_at, exit_at, fee, created_by, closed_by)
VALUES
(1, 21, '2023-06-02 07:30:00', '2023-06-02 09:45:00', 3000, 2, 2),  -- giờ hành chính
(2, 22, '2023-06-10 14:00:00', '2023-06-10 16:30:00', 3000, 2, 2),  -- giờ hành chính
(3, 23, '2023-06-18 23:20:00', '2023-06-19 03:10:00', 5000, 2, 2),  -- ngoài giờ
(4, 24, '2023-06-22 16:45:00', '2023-06-22 19:00:00', 3000, 2, 2),  -- giờ hành chính
(5, 25, '2023-06-29 08:00:00', '2023-06-29 10:30:00', 3000, 2, 2);  -- giờ hành chính

-- Năm 2024 Q2 (18 records)
-- Tháng 4/2024
INSERT INTO card_logs (card_id, vehicle_id, entry_at, exit_at, fee, created_by, closed_by)
VALUES
(1, 26, '2024-04-02 08:15:00', '2024-04-02 10:00:00', 3000, 2, 3),  -- giờ hành chính
(2, 27, '2024-04-08 09:30:00', '2024-04-08 11:45:00', 3000, 2, 3),  -- giờ hành chính
(3, 28, '2024-04-12 13:00:00', '2024-04-12 15:30:00', 3000, 2, 3),  -- giờ hành chính
(4, 29, '2024-04-16 22:45:00', '2024-04-17 01:30:00', 5000, 2, 3),  -- ngoài giờ
(5, 30, '2024-04-22 15:20:00', '2024-04-22 18:00:00', 3000, 2, 3),  -- giờ hành chính
(1, 31, '2024-04-28 10:00:00', '2024-04-28 12:15:00', 3000, 2, 3);  -- giờ hành chính

-- Tháng 5/2024
INSERT INTO card_logs (card_id, vehicle_id, entry_at, exit_at, fee, created_by, closed_by)
VALUES
(2, 32, '2024-05-05 08:30:00', '2024-05-05 10:45:00', 3000, 2, 3),  -- giờ hành chính
(3, 33, '2024-05-10 14:15:00', '2024-05-10 16:30:00', 3000, 2, 3),  -- giờ hành chính
(4, 34, '2024-05-15 23:00:00', '2024-05-16 02:30:00', 5000, 2, 3),  -- ngoài giờ
(5, 35, '2024-05-20 16:00:00', '2024-05-20 18:45:00', 3000, 2, 3),  -- giờ hành chính
(1, 36, '2024-05-25 07:30:00', '2024-05-25 09:15:00', 3000, 2, 3),  -- giờ hành chính
(2, 37, '2024-05-30 13:45:00', '2024-05-30 16:00:00', 3000, 2, 3);  -- giờ hành chính

-- Tháng 6/2024
INSERT INTO card_logs (card_id, vehicle_id, entry_at, exit_at, fee, created_by, closed_by)
VALUES
(3, 38, '2024-06-03 08:00:00', '2024-06-03 10:30:00', 3000, 2, 3),  -- giờ hành chính
(4, 39, '2024-06-08 14:30:00', '2024-06-08 17:00:00', 3000, 2, 3),  -- giờ hành chính
(5, 40, '2024-06-15 22:45:00', '2024-06-16 01:15:00', 5000, 2, 3),  -- ngoài giờ
(1, 41, '2024-06-20 15:30:00', '2024-06-20 18:00:00', 3000, 2, 3),  -- giờ hành chính
(2, 42, '2024-06-25 10:15:00', '2024-06-25 13:00:00', 3000, 2, 3),  -- giờ hành chính
(3, 43, '2024-06-29 07:00:00', '2024-06-29 09:30:00', 3000, 2, 3);  -- giờ hành chính

-- Năm 2025 Q2 (17 records)
-- Tháng 4/2025
INSERT INTO card_logs (card_id, vehicle_id, entry_at, exit_at, fee, created_by, closed_by)
VALUES
(4, 44, '2025-04-01 08:00:00', '2025-04-01 10:15:00', 3000, 2, 3),  -- giờ hành chính
(5, 45, '2025-04-07 09:30:00', '2025-04-07 11:45:00', 3000, 2, 3),  -- giờ hành chính
(1, 46, '2025-04-14 13:15:00', '2025-04-14 15:45:00', 3000, 2, 3),  -- giờ hành chính
(2, 47, '2025-04-18 22:30:00', '2025-04-19 00:00:00', 5000, 2, 3),  -- ngoài giờ
(3, 48, '2025-04-23 16:00:00', '2025-04-23 18:30:00', 3000, 2, 3),  -- giờ hành chính
(4, 49, '2025-04-28 10:30:00', '2025-04-28 12:45:00', 3000, 2, 3);  -- giờ hành chính

-- Tháng 5/2025
INSERT INTO card_logs (card_id, vehicle_id, entry_at, exit_at, fee, created_by, closed_by)
VALUES
(5, 50, '2025-05-02 08:45:00', '2025-05-02 11:00:00', 3000, 2, 3),  -- giờ hành chính
(1, 11, '2025-05-08 14:00:00', '2025-05-08 16:15:00', 3000, 2, 3),  -- giờ hành chính
(2, 12, '2025-05-12 23:15:00', '2025-05-13 02:00:00', 5000, 2, 3),  -- ngoài giờ
(3, 13, '2025-05-18 09:30:00', '2025-05-18 11:45:00', 3000, 2, 3),  -- giờ hành chính
(4, 14, '2025-05-25 15:00:00', '2025-05-25 17:30:00', 3000, 2, 3),  -- giờ hành chính
(5, 15, '2025-05-30 07:15:00', '2025-05-30 09:30:00', 3000, 2, 3);  -- giờ hành chính

-- Tháng 6/2025
INSERT INTO card_logs (card_id, vehicle_id, entry_at, exit_at, fee, created_by, closed_by)
VALUES
(1, 16, '2025-06-03 10:00:00', '2025-06-03 12:30:00', 3000, 2, 3),  -- giờ hành chính
(2, 17, '2025-06-10 14:30:00', '2025-06-10 16:45:00', 3000, 2, 3),  -- giờ hành chính
(3, 18, '2025-06-15 23:00:00', '2025-06-16 01:30:00', 5000, 2, 3),  -- ngoài giờ
(4, 19, '2025-06-20 08:15:00', '2025-06-20 10:45:00', 3000, 2, 3),  -- giờ hành chính
(5, 20, '2025-06-28 17:00:00', '2025-06-28 19:15:00', 3000, 2, 3);  -- giờ hành chính


-- monthly-card-logs
SET IDENTITY_INSERT monthly_card_logs ON;

-- ================== Q2/2023 (18) ==================
INSERT INTO monthly_card_logs
(id, monthly_card_id, entry_at, exit_at, created_by, closed_by)
VALUES
(1 ,10,'2023-04-03 08:00:00','2023-04-03 17:30:00',1,1),
(2 ,10,'2023-04-04 08:15:00','2023-04-04 17:45:00',1,1),
(3 ,10,'2023-04-05 08:00:00','2023-04-05 18:00:00',1,1),
(4 ,10,'2023-04-06 07:45:00','2023-04-06 17:30:00',1,1),
(5 ,10,'2023-04-07 08:30:00','2023-04-07 17:00:00',1,1),
(6 ,10,'2023-04-10 08:00:00','2023-04-10 17:30:00',1,1),

(7 ,11,'2023-05-02 08:00:00','2023-05-02 17:30:00',1,1),
(8 ,11,'2023-05-03 08:15:00','2023-05-03 17:45:00',1,1),
(9 ,11,'2023-05-04 08:00:00','2023-05-04 18:00:00',1,1),
(10,11,'2023-05-05 07:45:00','2023-05-05 17:30:00',1,1),
(11,11,'2023-05-08 08:00:00','2023-05-08 17:30:00',1,1),
(12,11,'2023-05-09 08:15:00','2023-05-09 17:45:00',1,1),

(13,12,'2023-06-05 08:00:00','2023-06-05 17:30:00',1,1),
(14,12,'2023-06-06 08:15:00','2023-06-06 17:45:00',1,1),
(15,12,'2023-06-07 08:00:00','2023-06-07 18:00:00',1,1),
(16,12,'2023-06-08 07:45:00','2023-06-08 17:30:00',1,1),
(17,12,'2023-06-12 08:00:00','2023-06-12 17:30:00',1,1),
(18,12,'2023-06-13 08:15:00','2023-06-13 17:45:00',1,1),

-- ================== Q2/2024 (18) ==================
(19,13,'2024-04-01 08:00:00','2024-04-01 17:30:00',1,1),
(20,13,'2024-04-02 08:15:00','2024-04-02 17:45:00',1,1),
(21,13,'2024-04-03 08:00:00','2024-04-03 18:00:00',1,1),
(22,13,'2024-04-04 07:45:00','2024-04-04 17:30:00',1,1),
(23,13,'2024-04-05 08:30:00','2024-04-05 17:00:00',1,1),
(24,13,'2024-04-08 08:00:00','2024-04-08 17:30:00',1,1),

(25,14,'2024-05-06 08:00:00','2024-05-06 17:30:00',1,1),
(26,14,'2024-05-07 08:15:00','2024-05-07 17:45:00',1,1),
(27,14,'2024-05-08 08:00:00','2024-05-08 18:00:00',1,1),
(28,14,'2024-05-09 07:45:00','2024-05-09 17:30:00',1,1),
(29,14,'2024-05-13 08:00:00','2024-05-13 17:30:00',1,1),
(30,14,'2024-05-14 08:15:00','2024-05-14 17:45:00',1,1),

(31,15,'2024-06-03 08:00:00','2024-06-03 17:30:00',1,1),
(32,15,'2024-06-04 08:15:00','2024-06-04 17:45:00',1,1),
(33,15,'2024-06-05 08:00:00','2024-06-05 18:00:00',1,1),
(34,15,'2024-06-06 07:45:00','2024-06-06 17:30:00',1,1),
(35,15,'2024-06-10 08:00:00','2024-06-10 17:30:00',1,1),
(36,15,'2024-06-11 08:15:00','2024-06-11 17:45:00',1,1),

-- ================== Q2/2025 (14) ==================
(37,16,'2025-04-01 08:00:00','2025-04-01 17:30:00',1,1),
(38,16,'2025-04-02 08:15:00','2025-04-02 17:45:00',1,1),
(39,16,'2025-04-03 08:00:00','2025-04-03 18:00:00',1,1),
(40,16,'2025-04-04 07:45:00','2025-04-04 17:30:00',1,1),
(41,16,'2025-04-05 08:30:00','2025-04-05 17:00:00',1,1),

(42,17,'2025-05-05 08:00:00','2025-05-05 17:30:00',1,1),
(43,17,'2025-05-06 08:15:00','2025-05-06 17:45:00',1,1),
(44,17,'2025-05-07 08:00:00','2025-05-07 18:00:00',1,1),
(45,17,'2025-05-08 07:45:00','2025-05-08 17:30:00',1,1),
(46,17,'2025-05-12 08:00:00','2025-05-12 17:30:00',1,1),

(47,18,'2025-06-02 08:00:00','2025-06-02 17:30:00',1,1),
(48,18,'2025-06-03 08:15:00','2025-06-03 17:45:00',1,1),
(49,18,'2025-06-04 08:00:00','2025-06-04 18:00:00',1,1),
(50,18,'2025-06-05 07:45:00','2025-06-05 17:30:00',1,1);

SET IDENTITY_INSERT monthly_card_logs OFF;
